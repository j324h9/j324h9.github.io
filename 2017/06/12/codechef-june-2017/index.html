<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Codechef 6月月赛总结 | oi_loser&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
    });
  </script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  
  <meta name="description" content="这次月赛打得不好。传统题难度不大，就是最后一题比较码农。最后区分度主要在Challenge上，然后我Challenge切不动，就滚粗了。 做的时候也几乎是倒着做的。  Cloning（CLONEME） 如果是判断两个序列排序后是否相同，这等价于判断每个数出现的次数是否相同。把每个位置上的数 \(a\) 用项 \(x^a\) 表示，就转成判断区间和的多项式是否相同。随机质数 \(x,p\) 然后在模">
<meta name="keywords" content="题解,Codechef">
<meta property="og:type" content="article">
<meta property="og:title" content="Codechef 6月月赛总结">
<meta property="og:url" content="http://yoursite.com/2017/06/12/codechef-june-2017/index.html">
<meta property="og:site_name" content="oi_loser&#39;s blog">
<meta property="og:description" content="这次月赛打得不好。传统题难度不大，就是最后一题比较码农。最后区分度主要在Challenge上，然后我Challenge切不动，就滚粗了。 做的时候也几乎是倒着做的。  Cloning（CLONEME） 如果是判断两个序列排序后是否相同，这等价于判断每个数出现的次数是否相同。把每个位置上的数 \(a\) 用项 \(x^a\) 表示，就转成判断区间和的多项式是否相同。随机质数 \(x,p\) 然后在模">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-12-18T13:45:51.758Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Codechef 6月月赛总结">
<meta name="twitter:description" content="这次月赛打得不好。传统题难度不大，就是最后一题比较码农。最后区分度主要在Challenge上，然后我Challenge切不动，就滚粗了。 做的时候也几乎是倒着做的。  Cloning（CLONEME） 如果是判断两个序列排序后是否相同，这等价于判断每个数出现的次数是否相同。把每个位置上的数 \(a\) 用项 \(x^a\) 表示，就转成判断区间和的多项式是否相同。随机质数 \(x,p\) 然后在模">
  
    <link rel="alternate" href="/atom.xml" title="oi_loser&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  

</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">oi_loser&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-codechef-june-2017" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/12/codechef-june-2017/" class="article-date">
  <time datetime="2017-06-12T11:17:15.000Z" itemprop="datePublished">2017-06-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Codechef 6月月赛总结
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这次月赛打得不好。传统题难度不大，就是最后一题比较码农。最后区分度主要在Challenge上，然后我Challenge切不动，就滚粗了。</p>
<p>做的时候也几乎是倒着做的。</p>
<hr>
<h3 id="cloningcloneme">Cloning（CLONEME）</h3>
<p>如果是判断两个序列排序后是否相同，这等价于判断每个数出现的次数是否相同。把每个位置上的数 <span class="math inline">\(a\)</span> 用项 <span class="math inline">\(x^a\)</span> 表示，就转成判断区间和的多项式是否相同。随机质数 <span class="math inline">\(x,p\)</span> 然后在模 <span class="math inline">\(p\)</span> 意义下判断多项式的值是否相等，取 <span class="math inline">\(2\)</span> 个模数基本上不会错了。</p>
<p>但这题要求允许一个位置不同，怎么办呢？</p>
<p>我的想法比较naive就是了。。。用 <span class="math inline">\(c_1[x],c_2[x]\)</span> 分别表示第一个和第二个区间中 <span class="math inline">\(x\)</span> 出现次数，那么两个区间similar的条件是或者 <span class="math inline">\(c_1,c_2\)</span> 相同，或者 <span class="math inline">\(\min\{x|c_1[x]\ne c_2[x]\}=\max\{x|c_1[x]\ne c_2[x]\}\)</span>。</p>
<p>考虑如何快速求 <span class="math inline">\(\min\{x|c_1[x]\ne c_2[x]\}\)</span>，可以二分 <span class="math inline">\(x\)</span>，然后判断 <span class="math inline">\(c_1\)</span> 和 <span class="math inline">\(c_2\)</span> 的前 <span class="math inline">\(x\)</span> 项是否都相等，把 <span class="math inline">\(c_1\)</span> 和 <span class="math inline">\(c_2\)</span> 前 <span class="math inline">\(x\)</span> 项对应的多项式（模意义下）的值搞出来比较就行了。</p>
<p>至于怎么搞出来呢，其实要算的是这个东西：</p>
<p><span class="math display">\[\sum_{l\le i\le r,a_i\le k}x^{a_i}\]</span></p>
<p>用可持久化线段树前缀和维护每个前缀的区间多项式值，将 <span class="math inline">\(r\)</span> 的线段树与 <span class="math inline">\(l-1\)</span> 的线段树相减后在其上二分即可求出 <span class="math inline">\(\min\{x|c_1[x]\ne c_2[x]\}\)</span> 和 <span class="math inline">\(\max\{x|c_1[x]\ne c_2[x]\}\)</span>。</p>
<p>复杂度 <span class="math inline">\(O((N+Q)\log A)\)</span>。也许有更优做法……？</p>
<hr>
<h3 id="persistent-oakoak">Persistent oak（OAK）</h3>
<p>一道比较裸的数据结构码农题……</p>
<p>树枝之间构成了有根树的结构。用 <span class="math inline">\(W_v\)</span> 表示结点 <span class="math inline">\(v\)</span> 目前还能再承受的重量，初始状态下，<span class="math inline">\(W_v=w_v\)</span>。</p>
<p>对于第1种操作，在结点 <span class="math inline">\(u\)</span> 上挂 <span class="math inline">\(x\)</span> 的重量，那么断开的结点是 <span class="math inline">\(u\)</span> 的祖先中最深的一个 <span class="math inline">\(a\)</span>，满足 <span class="math inline">\(W_a &lt; x\)</span>。断开 <span class="math inline">\(a\)</span> 相当于把以 <span class="math inline">\(a\)</span> 为根的子树内的重量清零（即对结点 <span class="math inline">\(a\)</span> 进行第2种操作）。如果没有结点断开，则 <span class="math inline">\(u\)</span> 及其所有祖先 <span class="math inline">\(v\)</span> 的 <span class="math inline">\(W_v\)</span> 值都会减少 <span class="math inline">\(x\)</span>。</p>
<p>对于第2种操作，将以 <span class="math inline">\(u\)</span> 为根的子树清空，记目前以 <span class="math inline">\(u\)</span> 为根的子树的总重为 <span class="math inline">\(U\)</span>，即 <span class="math inline">\(U=w_u-W_u\)</span>，该操作将以 <span class="math inline">\(u\)</span> 为根的子树中的结点 <span class="math inline">\(v\)</span> 的 <span class="math inline">\(W_v\)</span> 恢复为 <span class="math inline">\(w_v\)</span>，将 <span class="math inline">\(u\)</span> 的祖先 <span class="math inline">\(v\)</span> 的 <span class="math inline">\(W_v\)</span> 增加 <span class="math inline">\(U\)</span>。</p>
<p>这两个操作可以用树链剖分线段树来维护，复杂度 <span class="math inline">\(O(n+m\log^2n)\)</span>。由于题目要求可持久化，要用可持久化线段树。区间修改的标记最好永久化，可以省内存。（我用的 <code>unsigned</code> 自然溢出，比较两个数时判断两数的差是否不大于 <span class="math inline">\(10^7\)</span>，感觉卡不掉）</p>
<p>写起来细节好麻烦啊……前后总共花了大概一天才切掉这题。（当然也有可能是我太菜了）</p>
<p>（论连写两题可持久化线段树是一种怎样的体验）</p>
<hr>
<h3 id="chef-and-prime-queriesprmq">Chef and Prime Queries（PRMQ）</h3>
<p>用 <span class="math inline">\(P\)</span> 表示质数集合，<span class="math inline">\(e(x,p)\)</span> 表示最大的 <span class="math inline">\(t\)</span> 使得 <span class="math inline">\(p^t|x\)</span>，则要求的式子是</p>
<p><span class="math display">\[F(L,R,X,Y)=\sum_{i=X}^Y[i\in P]\sum_{j=L}^Re(a_j,i)=\sum_{i=X}^Y\sum_{j=L}^R[i\in P]e(a_j,i)\]</span></p>
<p>考虑构造一个矩阵，矩阵的第 <span class="math inline">\(i\)</span> 行第 <span class="math inline">\(j\)</span> 列为 <span class="math inline">\([i\in P]e(a_j,i)\)</span>，由于 <span class="math inline">\(10^6\)</span> 以内每个数最多 <span class="math inline">\(7\)</span> 个质因数，因此矩阵中非 <span class="math inline">\(0\)</span> 的数不超过 <span class="math inline">\(7N\)</span> 个。</p>
<p>接下来就是询问子矩形的数值和，把询问转成</p>
<p><span class="math display">\[F(L,R,X,Y)=F(1,R,1,Y)-F(1,R,1,X-1)-F(1,L-1,1,Y)+F(1,L-1,1,X-1)\]</span></p>
<p>就可以离线之后用树状数组做。时间的话，<span class="math inline">\((7N+4Q)\log_2a_i\le 2.2\times 10^7\)</span>，可以接受的。</p>
<hr>
<h3 id="pairwise-union-of-setsunionset">Pairwise union of sets（UNIONSET）</h3>
<p>感觉很迷的一道题，数据范围这么小似乎就是个暴力题？</p>
<p>暴力枚举两个集合 <span class="math inline">\(i,j\)</span>，<span class="math inline">\(O(len_i+len_j)\)</span> 判断两个集合并集是否为全集，总复杂度就是 <span class="math inline">\(O\left(\sum_{i=1}^N\sum_{j=1}^N(len_i+len_j)\right)=O\left(N\sum_{i=1}^Nlen_i\right)\)</span>。还可以 <span class="math inline">\(i\)</span> 枚举较大的集合，<span class="math inline">\(j\)</span> 枚举较小的集合，如果 <span class="math inline">\(len_i+len_j &lt; K\)</span> 就不判，省掉至少一半常数。</p>
<p>什么……这就能过了？？？</p>
<hr>
<h3 id="tripletssumq">Triplets（SUMQ）</h3>
<p>这题感觉很像NOIP2015普及组T3。。。</p>
<p>做法也相当简单，稍微化简一下式子</p>
<p><span class="math display">\[\sum_{x\in A}\sum_{y\in B}\sum_{z\in C}[x\le y][y\ge z](x+y)(y+z)\]</span></p>
<p><span class="math display">\[=\sum_{y\in B}\sum_{x\in A,x\le y}\sum_{z\in C,z\le y}(y^2+xy+yz+xz)\]</span></p>
<p><span class="math display">\[=\sum_{y\in B}\left(y^2\sum_{x\in A,x\le y}\sum_{z\in C,z\le y}1+y\sum_{x\in A,x\le y}x\sum_{z\in C,z\le y}1+y\sum_{z\in C,z\le y}z\sum_{x\in A,x\le y}1+\sum_{x\in A,x\le y}x\sum_{z\in C,z\le y}z\right)\]</span></p>
<p>把三个数组从小到大排序，然后从小到大枚举 <span class="math inline">\(y\)</span>，用Two-Pointers技巧维护最大的 <span class="math inline">\(x\in A\)</span> 满足 <span class="math inline">\(x\le y\)</span> 以及最大的 <span class="math inline">\(z\in A\)</span> 满足 <span class="math inline">\(z\le y\)</span>，同时维护 <span class="math inline">\(\sum_{x\in A,x\le y}1\)</span>，<span class="math inline">\(\sum_{x\in A,x\le y}x\)</span>，<span class="math inline">\(\sum_{z\in C,z\le y}1\)</span>，<span class="math inline">\(\sum_{z\in C,z\le y}z\)</span>，就做完了。</p>
<p>复杂度 <span class="math inline">\(O(p\log p+q\log q+r\log r)\)</span>。</p>
<hr>
<h3 id="chef-and-the-feastneo01">Chef and the Feast（NEO01）</h3>
<p>这题我想了挺久的样子，<del>当然也有可能是我太弱了</del></p>
<p>直接做不好做，先推几个结论。以下用 <span class="math inline">\((C,S)\)</span> 表示大小为 <span class="math inline">\(C\)</span>，和为 <span class="math inline">\(S\)</span> 的集合。</p>
<p><strong>结论一：存在最优解，只有一个集合的和非负。</strong></p>
<p><strong>证明：</strong>假设存在两个集合 <span class="math inline">\((C_1,S_1),(C_2,S_2)\)</span>，其中 <span class="math inline">\(S_1,S_2\ge 0\)</span>，合并两个集合，得到 <span class="math inline">\((C_1+C_2,S_1+S_2)\)</span>。</p>
<p>新的带权和为 <span class="math inline">\((C_1+C_2)(S_1+S_2)=C_1S_1+C_1S_2+C_2S_1+C_2S_2\ge C_1S_1+C_2S_2\)</span>。</p>
<p>所以可以把非负的集合两两合并，总和不会变少。</p>
<p><strong>结论二：存在最优解，除了和非负的集合以外，每个集合最多包含一个元素。</strong></p>
<p><strong>证明：</strong>假设存在集合 <span class="math inline">\((C,S)\)</span>，<span class="math inline">\(C&gt;1,S &lt; 0\)</span>。不妨设 <span class="math inline">\(x\)</span> 为集合中的元素，且 <span class="math inline">\(x &lt; 0\)</span>。则将集合拆分成 <span class="math inline">\((C-1,S-x)\)</span> 和 <span class="math inline">\((1,x)\)</span>。</p>
<p>新的带权和为 <span class="math inline">\((C-1)(S-x)+x=CS-Cx-S+2x=CS+(2-C)x-S&gt;CS\)</span>。</p>
<p>所以可以将和为负数且包含多个元素的集合中的负数拆分出来，总和不会变少。</p>
<p><strong>推论：最优的集合划分方案一定是一个包含所有非负数和若干个负数的集合 <span class="math inline">\(X\)</span> 与其余的只包含单个元素的集合。</strong></p>
<p>枚举 <span class="math inline">\(X\)</span> 的大小，把非负数全部放入 <span class="math inline">\(X\)</span>。接着考虑哪些数要放入 <span class="math inline">\(X\)</span>，由于放入 <span class="math inline">\(X\)</span> 的数的系数不小于 <span class="math inline">\(1\)</span>，而不放入 <span class="math inline">\(X\)</span> 的数的系数等于 <span class="math inline">\(1\)</span>，故应把最大的几个数放入 <span class="math inline">\(X\)</span>。</p>
<p>最后写法是，将序列 <span class="math inline">\(A\)</span> 排序并预处理前缀和，然后枚举 <span class="math inline">\(X\)</span> 的大小 <span class="math inline">\(k\)</span>，把后 <span class="math inline">\(k\)</span> 个数分一组，前 <span class="math inline">\(N-k\)</span> 个数每个分一组，用前缀和 <span class="math inline">\(O(1)\)</span> 算答案。</p>
<p>复杂度 <span class="math inline">\(O(N\log N)\)</span>。</p>
<p>（感觉这题有更好的分析方法啊？这题只是第三题啊我怎么做得这么麻烦啊？）</p>
<hr>
<h3 id="xenny-and-coin-rankingsxenrank">Xenny and Coin Rankings（XENRANK）</h3>
<p>水水的纯数学题，不想写题解了。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T,U,V;<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">	<span class="keyword">while</span>(T--)<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;U,&amp;V),<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,(U+V)*(U+V+<span class="number">1l</span>l)/<span class="number">2</span>+U+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="a-good-setgoodset">A Good Set（GOODSET）</h3>
<p>水水的智商题，不想写题解了。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T,n;<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">500</span>;n--;x--)<span class="built_in">printf</span>(<span class="string">"%d%c"</span>,x,<span class="string">" \n"</span>[!n]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>刚掉这些题以后，最后剩下两题ES和SBTR。看了下题，感觉不太可做。</p>
<h3 id="euler-sumes">Euler Sum（ES）</h3>
<p>求 <span class="math inline">\(\sum_{i=1}^n\lfloor ei\rfloor\)</span>，<span class="math inline">\(n\le 10^{4000}\)</span>。等等——代码长度限制1KB？！FML？</p>
<p>C++不可A，钦点我们要用Java或者Python这些自带高精度的语言。。。还好我会那么一点儿Python。。。</p>
<p>一开始想是不是要利用 <span class="math inline">\(e\)</span> 的性质而不用求出 <span class="math inline">\(e\)</span> 的高精度近似值，后来想想觉得没救。因为如果这题能做，<span class="math inline">\(n=10^{4000}\)</span> 的答案减去 <span class="math inline">\(n=10^{4000}-1\)</span> 的答案就能得到 <span class="math inline">\(e\)</span> 的高精度近似值……嗯也许这题做法很暴力qaq</p>
<p>继续想，感觉似乎见过类似的题，好像强上类欧几里得算法可以搞过去？</p>
<p>接着就 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> decimal <span class="keyword">import</span> *</span><br><span class="line">getcontext().prec=<span class="number">1000</span></span><br></pre></td></tr></table></figure></p>
<p>接着 <span class="math inline">\(e=\sum_{i=0}^k\frac{1}{i!}\)</span> 暴力算出 <span class="math inline">\(e\)</span> 的小数点后1000位，然后用类欧几里得算法搞搞搞。。。至于这么搞呢，大概就是考虑函数 <span class="math inline">\(y=kx+b\)</span> 的图象在 <span class="math inline">\(x\in[1,n]\)</span> 区域与 <span class="math inline">\(x\)</span> 轴之间的整点个数，一开始令 <span class="math inline">\(k=e,b=0\)</span>，然后每次先把 <span class="math inline">\(k,b\)</span> 模 <span class="math inline">\(1\)</span>（同时累加上模掉部分的点数），再把坐标系转90度，把原点移到原来坐标系的 <span class="math inline">\((n,\lfloor kn+b\rfloor)\)</span> 位置，一直迭代就行啦。</p>
<p>调了很久调过样例，又调了一会儿参数轻而易举把 <span class="math inline">\(n=10^{100}\)</span> 跑过去了，正欢喜的时候测下 <span class="math inline">\(n=10^{4000}\)</span>……TLE飞了……</p>
<p>算了先交拿个50分再说，接着想办法优化= =</p>
<p>然后你懂得本sb干了什么事情，各种优化运算次数调精度甚至一边迭代一边把 <code>getcontext().prec</code> 改小什么的都用上了，就是要跑好几十秒，没救2333</p>
<p>接着觉得这题不是什么类欧几里得能搞过去的，就继续想……然而并没有想出更好做法= =b</p>
<p>然后，某天晚上突发奇想，类欧几里得的原始形式不是 <span class="math inline">\(y=\frac{ax+b}{c}\)</span>（<span class="math inline">\(a,b,c\in\mathbf{Z}\)</span>）吗？如果把 <span class="math inline">\(e\)</span> 写成分数不是就不用 <code>decimal</code> 了？而且从NOI2016上学到的知识，分数类跑得比高精度小数快……</p>
<p>嗯！这样一定会快很多！</p>
<p>然后重新写了一发分数版的类欧几里得算法，居然直接AC了，2333</p>
<p>一看虽然这题时限是2s但Python时限10s，于是我的程序7s+跑过去了……感动……</p>
<p>做完9题以后终于可以专心搞Challenge了。。。</p>
<hr>
<h3 id="saboteur-challengesbtr">Saboteur (Challenge)（SBTR）</h3>
<p>唉。。。说多了都是泪。。。姿势水平不够最后只有89.918分，被fjzzq2002等大爷怒踩。。。</p>
<p>看完题，发现如果转成补集，就是求最大点权和树形导出子图。然后看数据类型，</p>
<p>1、<span class="math inline">\(N\le 20\)</span>，暴力。。。</p>
<p>2、<span class="math inline">\(N\le 40\)</span>，好像暴力要加一些剪枝？</p>
<p>3、<span class="math inline">\(M=N\)</span>，基环外向树，枚举删掉一个点？</p>
<p>4、<span class="math inline">\(M\le N+3\)</span>，好像做法差不多？</p>
<p>5、<span class="math inline">\(M=\frac{N(N-1)}{2}\)</span>，这不就是取一条边吗。。。</p>
<p>6、Wheel Graph，不懂</p>
<p>7、Random Graph，没啥思路</p>
<p>于是开始刚 <span class="math inline">\(N\le 40\)</span>，想着想着想到我的集训队论文上去了，感觉可以只搜极大树形导出子图，用Bron-Kerbosch算法思想，维护两个集合，一个是当前选的点 <span class="math inline">\(S\)</span>，一个是剩下的允许加入的点 <span class="math inline">\(U\)</span>，每次枚举一个 <span class="math inline">\(U\)</span> 中与 <span class="math inline">\(S\)</span> 相邻的点是否加入 <span class="math inline">\(S\)</span>，如果不加入则从 <span class="math inline">\(U\)</span> 中删掉。</p>
<p>这样可以不重不漏枚举所有树形导出子图，然而没法只搜极大……可是这并不像极大独立集那样可以找个点Pivot来优化复杂度……</p>
<p>不管了先写一发，然后和大暴力拍没问题，很好……随机几组 <span class="math inline">\(N=40\)</span> 的数据……啊，跑了4s……</p>
<p>然后想用点度递增序作搜索序什么的，写完发现跑更慢，GG。</p>
<p>不是很会优化，先交吧至少能过第一个数据……卧槽爆0了？！</p>
<p>TLE了。。。算了明天再看什么情况</p>
<p>……</p>
<p>第二天起来，对着代码看了一会儿，加了个优化，把 <span class="math inline">\(U\)</span> 中加入 <span class="math inline">\(S\)</span> 会成环的直接从 <span class="math inline">\(U\)</span> 中删掉，这样剪枝能剪更彻底些，然后不管怎么随机的 <span class="math inline">\(N=40\)</span> 的数据都秒出了，妙。再交……又爆0了？！</p>
<p>WA。。。</p>
<p>论WrongAnswer为什么叫WrongAnswer。。。查了半天的错根本没查出有错，然后判了个如果 <span class="math inline">\(K\le 40\)</span> 就跑搜索，否则直接输出0。然后，就有分了？【虽然只有1.6分并没有什么卵用】</p>
<p>看了下评分方式才知道怎么回事——我TM又没认真读题！评分是按照每个点的答案之和的倒数给的（？），怪不得挂一个点就全WA……【不过我还是想吐槽这种奇葩评分方式】</p>
<p>又打了个完全图的取一条边，分似乎没多的样子……</p>
<p>感觉要多分得先把随机数据搞过去……怎么乱搞呢？就这样：把搜索改成随机贪心，用BFS，每次随机一个能扩展的点扩展，多次随机取最优。尽管我也不知道这样能不能搞到足够优的解……</p>
<p>不过还是得试试。写了一发交上去，竟直接97分了！接着我又打了Wheel Graph和基环外向树，Wheel Graph知道是什么以后就是枚举中心取不取然后环上取最值，很好写，基环外向树统计每个子树的点权和之后删环上最小的。打完交，意料之中地分没变。</p>
<p>然后准备打 <span class="math inline">\(M\le N+3\)</span> 的点，看起来也能用我的论文的做法解决，然后就想怎么DP，并没有好的想法设计DP，不管怎么都处理不了连通的限制。接着开始想缩边，把度为1的点往对面缩，再把度为2的点缩成链，一条链表示成一条边，要在边上记这条链上的点集，然后外面枚举关键点，里面跑个类似MST的东西，细节非常多。。。这东西immaotalCO写过，调了一晚上才调出来。我写了一个多小时以后意识到不太可写，就删了。</p>
<p>看来这题的关键就在怎样做随机数据。</p>
<p>接着继续搞随机图，首先是把多次随机弄了个卡时，效果似乎不错的样子= =接着我试着把卡时的时限改大本机上跑，发现会不断地出更优解，就尝试优化随机化的常数。。。当然是没用的咯，因为没啥可优化的。</p>
<p>根据之前乱搞的经验，贪心经常比随机化优秀——比如CTSC2016D2T1，贪心每个点有3分，随机化基本没有，我考场上两种都试了一下，于是部分分拿满了2333 如果把随机化换成每次加入一个点权最大的能加入的点呢？这样只要把BFS队列换成优先队列。来，<code>std::priority_queue&lt;int&gt;</code> 走起……</p>
<p>测了下发现怎么贪心的答案比随机化要大不少啊，有点惨啊是不是贪心比随机化更劣啊？？索性全删了。</p>
<p>又尝试了几种乱搞姿势还是不给力。接着突然意识到我程序求的是补集，那么更大意味着更优啊？？？我的脑子呢？？？</p>
<p>重新写了一遍优先队列贪心。交上去，分数变低了……为什么？我自己测的数据不都是贪心更优吗？</p>
<p>不管了我两个程序各跑一段时间，交上去分数多了不到1分……但我觉得贪心应该比随机化优很多啊，并不是很懂。</p>
<p>最后还想继续搞点分，并没有想到好的方法。前面一堆人99+分，我怎么都只能排到rank 15……</p>
<hr>
<p>当然，Challenge最后是有重测的。</p>
<p>重测完我的分数变成了89.918分。</p>
<p>当然，别人分数也变低了，于是我名次上升了。</p>
<p>最后fjzzq2002 990.338分rank 7，我989.918分rank 9，ccz181078 989.907分rank 10，peehs_moorhsum 989.854分rank 11。rank 9~11的分差真是小，果然OI有时候需要运气……</p>
<p>然而再怎么好的运气依旧掩盖不了我不如初中生的事实= =</p>
<p>就要IOI了，再这么弱下去怎么行？刷的题还是太少，多刷题才能积累经验啊。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/12/codechef-june-2017/" data-id="cjegziddd000ndf1ldcl3z5q1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Codechef/">Codechef</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/题解/">题解</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/07/15/fjtrain2017/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          FJ省队集训2017滚粗记
        
      </div>
    </a>
  
  
    <a href="/2017/06/02/51nod-25/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">失败者的辣鸡本质——记51nod算法马拉松25</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/51nod/">51nod</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/APIO/">APIO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AtCoder/">AtCoder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTSC/">CTSC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Codechef/">Codechef</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Codeforces/">Codeforces</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FJOI/">FJOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FJWC/">FJWC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HNOI/">HNOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOI/">IOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LYDSY/">LYDSY</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NOI/">NOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDOI/">SDOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SHOI/">SHOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TopCoder/">TopCoder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UOJ/">UOJ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WC/">WC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZJOI/">ZJOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模板/">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/清华集训/">清华集训</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/百度之星/">百度之星</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/省队集训/">省队集训</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/记录/">记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/酱油记/">酱油记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集训队互测/">集训队互测</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/题解/">题解</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/51nod/" style="font-size: 16.25px;">51nod</a> <a href="/tags/APIO/" style="font-size: 12.5px;">APIO</a> <a href="/tags/AtCoder/" style="font-size: 10px;">AtCoder</a> <a href="/tags/CTSC/" style="font-size: 11.25px;">CTSC</a> <a href="/tags/Codechef/" style="font-size: 10px;">Codechef</a> <a href="/tags/Codeforces/" style="font-size: 15px;">Codeforces</a> <a href="/tags/FJOI/" style="font-size: 12.5px;">FJOI</a> <a href="/tags/FJWC/" style="font-size: 10px;">FJWC</a> <a href="/tags/HNOI/" style="font-size: 10px;">HNOI</a> <a href="/tags/IOI/" style="font-size: 10px;">IOI</a> <a href="/tags/LYDSY/" style="font-size: 11.25px;">LYDSY</a> <a href="/tags/NOI/" style="font-size: 12.5px;">NOI</a> <a href="/tags/SDOI/" style="font-size: 10px;">SDOI</a> <a href="/tags/SHOI/" style="font-size: 10px;">SHOI</a> <a href="/tags/TopCoder/" style="font-size: 10px;">TopCoder</a> <a href="/tags/UOJ/" style="font-size: 13.75px;">UOJ</a> <a href="/tags/WC/" style="font-size: 10px;">WC</a> <a href="/tags/ZJOI/" style="font-size: 10px;">ZJOI</a> <a href="/tags/总结/" style="font-size: 17.5px;">总结</a> <a href="/tags/模板/" style="font-size: 10px;">模板</a> <a href="/tags/清华集训/" style="font-size: 11.25px;">清华集训</a> <a href="/tags/百度之星/" style="font-size: 10px;">百度之星</a> <a href="/tags/省队集训/" style="font-size: 11.25px;">省队集训</a> <a href="/tags/记录/" style="font-size: 11.25px;">记录</a> <a href="/tags/酱油记/" style="font-size: 20px;">酱油记</a> <a href="/tags/集训队互测/" style="font-size: 10px;">集训队互测</a> <a href="/tags/题解/" style="font-size: 18.75px;">题解</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/12/04/lydsy-3489/">LYDSY P3489 题解</a>
          </li>
        
          <li>
            <a href="/2017/10/29/codeforces-443/">Codeforces Round 443 总结</a>
          </li>
        
          <li>
            <a href="/2017/10/22/astar2017/">百度之星Astar决赛被虐记</a>
          </li>
        
          <li>
            <a href="/2017/10/15/codeforces-440/">Codeforces Round 440 总结</a>
          </li>
        
          <li>
            <a href="/2017/10/09/atcoder-codefestival2017-qualb/">AtCoder CODE FESTIVAL 2017 qual B 总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 j324h9<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>